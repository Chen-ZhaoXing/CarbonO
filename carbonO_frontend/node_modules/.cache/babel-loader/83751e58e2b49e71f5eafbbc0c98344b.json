{"ast":null,"code":"var _jsxFileName = \"/Users/noviaantony/Desktop/CS203-Team-2/carbonO_frontend/src/screens/ClaimReward2.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport FileUploaded from \"./FileUploader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ClaimReward2 = () => {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [showSuccessModal, setShowSuccessModal] = React.useState(false);\n  const [showErrorModal, setShowErrorModal] = React.useState(false);\n\n  const submitReceipt = () => {\n    // convert file to uri\n    const encodeImageURI = require(\"encode-image-uri\");\n\n    encodeImageURI(selectedFile).then(base64 => {\n      // console.log(base64);\n      // console.log(base64.substring(23, base64.length));\n      let body = {\n        requests: [{\n          image: {\n            content: base64.substring(23, base64.length)\n          },\n          features: [{\n            type: \"TEXT_DETECTION\"\n          }]\n        }]\n      };\n      let resp = null;\n      axios.post(\"https://vision.googleapis.com/v1/images:annotate?key=AIzaSyC3rJnOOPzFe0snLWmBrgukHmSqFxlimU8\", body).then(function (response) {\n        // console.log(response)\n        // console.log(response.data.responses[0].textAnnotations)\n        // console.log(response.data.responses[0].textAnnotations[21].description)\n        // words.concat(response.data.responses[0].textAnnotations)\n        let wordCheck = 0;\n\n        for (let i = 0; i < response.data.responses[0].textAnnotations.length; i++) {\n          if (response.data.responses[0].textAnnotations[i].description === \"Chicken\") {\n            wordCheck++;\n          } else if (response.data.responses[0].textAnnotations[i].description === \"Rice\") {\n            wordCheck++;\n          }\n\n          if (wordCheck === 2) {\n            setShowSuccessModal(true);\n            return;\n          }\n        }\n\n        setShowErrorModal(false);\n      });\n    }).catch(error => {\n      console.error(error); // Handle your error\n    });\n    {\n      showSuccessModal ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-auto my-6 mx-auto max-w-3xl\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-0 rounded-lg shadow-lg relative flex flex-col w-2/3 bg-white outline-none focus:outline-none\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-3xl font-semibold\",\n                  children: \"Singapore Chicken Rice\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none\",\n                  onClick: () => setshowSuccessModal(false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative p-6 flex-auto\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"my-4 text-slate-500 text-lg leading-relaxed\",\n                  children: \"you have successfully claimed 300 e-credits!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\",\n                  type: \"button\",\n                  onClick: () => setShowModal(false),\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"opacity-25 fixed inset-0 z-40 bg-black\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true) : null;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(FileUploaded, {\n        onFileSelectSuccess: file => setSelectedFile(file),\n        onFileSelectError: _ref => {\n          let {\n            error\n          } = _ref;\n          return alert(error);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: submitReceipt,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ClaimReward2, \"erbxP7FQGotzp7FsYhEMoFt6i8E=\");\n\n_c = ClaimReward2;\nexport default ClaimReward2;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimReward2\");","map":{"version":3,"names":["React","useState","axios","FileUploaded","ClaimReward2","selectedFile","setSelectedFile","showSuccessModal","setShowSuccessModal","showErrorModal","setShowErrorModal","submitReceipt","encodeImageURI","require","then","base64","body","requests","image","content","substring","length","features","type","resp","post","response","wordCheck","i","data","responses","textAnnotations","description","catch","error","console","setshowSuccessModal","setShowModal","file","alert"],"sources":["/Users/noviaantony/Desktop/CS203-Team-2/carbonO_frontend/src/screens/ClaimReward2.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport FileUploaded from \"./FileUploader\";\n\n\nconst ClaimReward2 = () => {\n\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [showSuccessModal, setShowSuccessModal] = React.useState(false);\n  const [showErrorModal, setShowErrorModal] = React.useState(false);\n\n\n\n  const submitReceipt = () => {\n\n    // convert file to uri\n    const encodeImageURI = require(\"encode-image-uri\");\n\n\n\n    encodeImageURI(selectedFile)\n      .then((base64) => {\n\n        // console.log(base64);\n        // console.log(base64.substring(23, base64.length));\n\n        let body = {\n          requests: [\n            {\n              image: {\n                content: base64.substring(23, base64.length),\n              },\n              features: [\n                {\n                  type: \"TEXT_DETECTION\",\n                },\n              ],\n            },\n          ],\n        };\n\n        let resp = null\n\n        axios\n        .post(\n          \"https://vision.googleapis.com/v1/images:annotate?key=AIzaSyC3rJnOOPzFe0snLWmBrgukHmSqFxlimU8\",\n          body\n        )\n        .then( function (response) {\n\n          // console.log(response)\n          // console.log(response.data.responses[0].textAnnotations)\n          // console.log(response.data.responses[0].textAnnotations[21].description)\n          // words.concat(response.data.responses[0].textAnnotations)\n\n          let wordCheck = 0;\n\n\n          for (let i = 0; i < response.data.responses[0].textAnnotations.length ; i++) {\n            if (response.data.responses[0].textAnnotations[i].description === \"Chicken\") {\n              wordCheck++;\n            } else if (response.data.responses[0].textAnnotations[i].description === \"Rice\") {\n              wordCheck++;\n            }\n\n            if (wordCheck === 2) {\n              setShowSuccessModal(true);\n              return;\n            }\n          \n          }\n\n          setShowErrorModal(false);\n\n\n\n        });\n        \n\n\n      }).catch((error) => {\n        console.error(error);\n        // Handle your error\n      });\n\n      {showSuccessModal ? (\n        <>\n          <div className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n            <div className=\"relative w-auto my-6 mx-auto max-w-3xl\">\n              {/*content*/}\n              <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-2/3 bg-white outline-none focus:outline-none\">\n                {/*header*/}\n                <div className=\"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t\">\n                  <h3 className=\"text-3xl font-semibold\">\n                    Singapore Chicken Rice\n                  </h3>\n                  <button\n                    className=\"p-1 ml-auto bg-transparent border-0 text-black opacity-5 float-right text-3xl leading-none font-semibold outline-none focus:outline-none\"\n                    onClick={() => setshowSuccessModal(false)}\n                  ></button>\n                </div>\n                {/*body*/}\n                <div className=\"relative p-6 flex-auto\">\n                  <p className=\"my-4 text-slate-500 text-lg leading-relaxed\">\n                    you have successfully claimed 300 e-credits!\n                  </p>\n                </div>\n                {/*footer*/}\n                <div className=\"flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b\">\n                  <button\n                    className=\"text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\"\n                    type=\"button\"\n                    onClick={() => setShowModal(false)}\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"opacity-25 fixed inset-0 z-40 bg-black\"></div>\n        </>\n      ) : null;\n      }\n\n\n\n  };\n\n  return (\n    <div>\n      <form>\n        <FileUploaded\n          onFileSelectSuccess={(file) => setSelectedFile(file)}\n          onFileSelectError={({ error }) => alert(error)}\n        />\n      </form>\n      <button onClick={submitReceipt}>Submit</button>\n    </div>\n  );\n};\n\nexport default ClaimReward2;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}