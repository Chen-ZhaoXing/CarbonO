{"ast":null,"code":"var _jsxFileName = \"/Users/noviaantony/Desktop/CS203-Team-2/carbonO_frontend/src/screens/ClaimReward2.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport FileUploaded from \"./FileUploader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ClaimReward2 = () => {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const submitReceipt = () => {\n    // convert file to uri\n    const encodeImageURI = require(\"encode-image-uri\");\n\n    encodeImageURI(selectedFile).then(base64 => {\n      // console.log(base64);\n      // console.log(base64.substring(23, base64.length));\n      let body = {\n        requests: [{\n          image: {\n            content: base64.substring(23, base64.length)\n          },\n          features: [{\n            type: \"TEXT_DETECTION\"\n          }]\n        }]\n      };\n      let resp = null;\n      axios.post(\"https://vision.googleapis.com/v1/images:annotate?key=AIzaSyC3rJnOOPzFe0snLWmBrgukHmSqFxlimU8\", body).then(function (response) {\n        // console.log(response)\n        // console.log(response.data.responses[0].textAnnotations)\n        // console.log(response.data.responses[0].textAnnotations[21].description)\n        // words.concat(response.data.responses[0].textAnnotations)\n        let wordCheck = 0;\n\n        for (let i = 0; i < response.data.responses[0].textAnnotations.length; i++) {\n          if (response.data.responses[0].textAnnotations[i].description === \"Chicken\") {\n            wordCheck++;\n          } else if (response.data.responses[0].textAnnotations[i].description === \"Rice\") {\n            wordCheck++;\n          }\n\n          if (wordCheck === 2) {\n            console.log(\"You have received 300 e-credits!\");\n            return;\n          }\n        }\n      });\n    }).catch(error => {\n      console.error(error); // Handle your error\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(FileUploaded, {\n        onFileSelectSuccess: file => setSelectedFile(file),\n        onFileSelectError: _ref => {\n          let {\n            error\n          } = _ref;\n          return alert(error);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: submitReceipt,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ClaimReward2, \"cz3B5sQOxlrekAnUFUPeMaA2gqY=\");\n\n_c = ClaimReward2;\nexport default ClaimReward2;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimReward2\");","map":{"version":3,"names":["React","useState","axios","FileUploaded","ClaimReward2","selectedFile","setSelectedFile","submitReceipt","encodeImageURI","require","then","base64","body","requests","image","content","substring","length","features","type","resp","post","response","wordCheck","i","data","responses","textAnnotations","description","console","log","catch","error","file","alert"],"sources":["/Users/noviaantony/Desktop/CS203-Team-2/carbonO_frontend/src/screens/ClaimReward2.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport FileUploaded from \"./FileUploader\";\n\n\nconst ClaimReward2 = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n\n\n\n\n\n  const submitReceipt = () => {\n\n    // convert file to uri\n    const encodeImageURI = require(\"encode-image-uri\");\n\n\n\n    encodeImageURI(selectedFile)\n      .then((base64) => {\n\n        // console.log(base64);\n        // console.log(base64.substring(23, base64.length));\n\n        let body = {\n          requests: [\n            {\n              image: {\n                content: base64.substring(23, base64.length),\n              },\n              features: [\n                {\n                  type: \"TEXT_DETECTION\",\n                },\n              ],\n            },\n          ],\n        };\n\n        let resp = null\n\n        axios\n        .post(\n          \"https://vision.googleapis.com/v1/images:annotate?key=AIzaSyC3rJnOOPzFe0snLWmBrgukHmSqFxlimU8\",\n          body\n        )\n        .then( function (response) {\n\n          // console.log(response)\n          // console.log(response.data.responses[0].textAnnotations)\n          // console.log(response.data.responses[0].textAnnotations[21].description)\n          // words.concat(response.data.responses[0].textAnnotations)\n\n          let wordCheck = 0;\n\n\n          for (let i = 0; i < response.data.responses[0].textAnnotations.length ; i++) {\n            if (response.data.responses[0].textAnnotations[i].description === \"Chicken\") {\n              wordCheck++;\n            } else if (response.data.responses[0].textAnnotations[i].description === \"Rice\") {\n              wordCheck++;\n            }\n\n            if (wordCheck === 2) {\n              console.log(\"You have received 300 e-credits!\")\n              return;\n            }\n          \n          }\n\n        });\n        \n\n\n      }).catch((error) => {\n        console.error(error);\n        // Handle your error\n      });\n\n\n\n  };\n\n  return (\n    <div>\n      <form>\n        <FileUploaded\n          onFileSelectSuccess={(file) => setSelectedFile(file)}\n          onFileSelectError={({ error }) => alert(error)}\n        />\n      </form>\n      <button onClick={submitReceipt}>Submit</button>\n    </div>\n  );\n};\n\nexport default ClaimReward2;\n\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;;AAGA,MAAMC,YAAY,GAAG,MAAM;EAAA;;EACzB,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCL,QAAQ,CAAC,IAAD,CAAhD;;EAMA,MAAMM,aAAa,GAAG,MAAM;IAE1B;IACA,MAAMC,cAAc,GAAGC,OAAO,CAAC,kBAAD,CAA9B;;IAIAD,cAAc,CAACH,YAAD,CAAd,CACGK,IADH,CACSC,MAAD,IAAY;MAEhB;MACA;MAEA,IAAIC,IAAI,GAAG;QACTC,QAAQ,EAAE,CACR;UACEC,KAAK,EAAE;YACLC,OAAO,EAAEJ,MAAM,CAACK,SAAP,CAAiB,EAAjB,EAAqBL,MAAM,CAACM,MAA5B;UADJ,CADT;UAIEC,QAAQ,EAAE,CACR;YACEC,IAAI,EAAE;UADR,CADQ;QAJZ,CADQ;MADD,CAAX;MAeA,IAAIC,IAAI,GAAG,IAAX;MAEAlB,KAAK,CACJmB,IADD,CAEE,8FAFF,EAGET,IAHF,EAKCF,IALD,CAKO,UAAUY,QAAV,EAAoB;QAEzB;QACA;QACA;QACA;QAEA,IAAIC,SAAS,GAAG,CAAhB;;QAGA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACG,IAAT,CAAcC,SAAd,CAAwB,CAAxB,EAA2BC,eAA3B,CAA2CV,MAA/D,EAAwEO,CAAC,EAAzE,EAA6E;UAC3E,IAAIF,QAAQ,CAACG,IAAT,CAAcC,SAAd,CAAwB,CAAxB,EAA2BC,eAA3B,CAA2CH,CAA3C,EAA8CI,WAA9C,KAA8D,SAAlE,EAA6E;YAC3EL,SAAS;UACV,CAFD,MAEO,IAAID,QAAQ,CAACG,IAAT,CAAcC,SAAd,CAAwB,CAAxB,EAA2BC,eAA3B,CAA2CH,CAA3C,EAA8CI,WAA9C,KAA8D,MAAlE,EAA0E;YAC/EL,SAAS;UACV;;UAED,IAAIA,SAAS,KAAK,CAAlB,EAAqB;YACnBM,OAAO,CAACC,GAAR,CAAY,kCAAZ;YACA;UACD;QAEF;MAEF,CA7BD;IAiCD,CAxDH,EAwDKC,KAxDL,CAwDYC,KAAD,IAAW;MAClBH,OAAO,CAACG,KAAR,CAAcA,KAAd,EADkB,CAElB;IACD,CA3DH;EA+DD,CAtED;;EAwEA,oBACE;IAAA,wBACE;MAAA,uBACE,QAAC,YAAD;QACE,mBAAmB,EAAGC,IAAD,IAAU3B,eAAe,CAAC2B,IAAD,CADhD;QAEE,iBAAiB,EAAE;UAAA,IAAC;YAAED;UAAF,CAAD;UAAA,OAAeE,KAAK,CAACF,KAAD,CAApB;QAAA;MAFrB;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF,eAOE;MAAQ,OAAO,EAAEzB,aAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAPF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAWD,CA1FD;;GAAMH,Y;;KAAAA,Y;AA4FN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}